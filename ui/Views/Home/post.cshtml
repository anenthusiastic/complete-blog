<!-- Post Content -->

  <article>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          @await Html.PartialAsync("../../hazÄ±r/contents/".Insert(21 , (string)@Model.post.content));
        </div>
      </div>
    </div>
  </article>

<hr>
<div class="container mt-5">
  <h3 class="col-lg-8 col-md-10 mx-auto mb-4">Comments</h3>
  <h5 class="text-muted float-right mr-3">@ViewBag.commentCount Comments</h5>
  <div class="clearfix"></div>
  @foreach (var item in Model.comments)
  {
    <div class="row mt-2">
      <div class="col-lg-8 col-md-10 mx-auto">
            <div class="card card-black post">
                <div class="post-heading">
                    <div class="float-left image mt-4 ml-3 mr-3">
                        <img src="http://bootdey.com/img/Content/user_1.jpg" class="img-circle avatar" alt="user profile image">
                    </div>
                    <div class="float-left meta mt-4 ml-2 ">
                        <div class="title h5">
                              <b>
                                @if(String.IsNullOrEmpty(item.name) & String.IsNullOrEmpty(item.surname) ){
                                  item.name ="Anonymous";
                                }

                                @item.name @item.surname
                              </b>
                            made a comment.
                        </div>
                        <h6 class="text-muted mt-2">@item.date</h6>
                    </div>
                    <a class="btn btn-outline-danger float-right mt-4 mr-4" style="display:@ViewBag.admin;" href="/Home/deletecomment/@item.id">Delete</a>
                </div> 
                <div class="post-description ml-3"> 
                    <p>@item.comment</p>

                </div>
            </div>
        </div>
    </div>
  }
</div>
<hr>

  <div class="container mt-5">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <h3>Leave Your Comment</h3>
        <hr>
        
        <form method="POST" action="/Home/makeComment/@Model.post.id" name="makeComment" id="commentForm" >
          <input type="hidden" name="id"/>
          <input type="hidden" name="PostId" value="@Model.post.id"/>
          <div class="control-group">
            <div class="form-group floating-label-form-group controls">
              <label for="name">Name</label>
              <input name="name" class="form-control" placeholder="Name" id="name" >
              <p class="help-block text-danger"></p>
            </div>
          </div>
          <div class="control-group">
            <div class="form-group floating-label-form-group controls">
              <label for="surname">Surname</label>
              <input name="surname" class="form-control" placeholder="Surname" id="surname" >
              <p class="help-block text-danger"></p>
            </div>
          </div>
          <div class="control-group">
            <div class="form-group floating-label-form-group controls">
              <label for="comment">Comment</label>
              <textarea name="comment" rows="8" class="form-control" placeholder="Your comment" id="comment" required data-validation-required-message="Please enter a comment."></textarea>
              <p class="help-block text-danger"></p>
            </div>
          </div>
          <br>
          <div id="success"></div>
          <button type="submit" class="btn btn-primary" id="makeCommentButton">Post Comment</button>
        </form>
      </div>
    </div>
  </div>